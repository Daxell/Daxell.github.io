<!DOCTYPE html>
<html>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  
  <script>
    console.log("initialized.");
      AFRAME.registerComponent('modify-materials', {
        init: function () {
          // Wait for model to load.
          this.el.addEventListener('model-loaded', () => {
            console.log("Model-loaded.");
            // Grab the mesh / scene.
            const obj = this.el.getObject3D('mesh');
            // Go over the submeshes and modify materials we want.
            obj.traverse(node => {
              if (node.name.indexOf('1stSegment') !== -1) {
                node.material.color.set('black');
                console.log("Material changed.");
              }
              
              
            });
          });
        }
      });
    </script>
  
  <header Access-Control-Allow-Origin: *></header>
  <body style="margin : 0px; overflow: hidden;">
    
    <a-scene embedded vr-mode-ui="enabled: false;" arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;' renderer="colorManagement: true; logarithmicDepthBuffer: true;">
      
      <a-marker markerhandler type='barcode' value='6' smooth='true' smoothThreshold='15' smoothTolerance='.01' smoothCount='100' changeMatrixMode: "cameraTransformMatrix">
        <a-entity
          animation-mixer
          position="0 0 .5"
          scale="5 5 5"
          
          gltf-model="https://rawcdn.githack.com/Daxell/Daxell.github.io/930408d26c7b507fbd2bfae473f9c4afebe19dec/UR5%20Animated.glb"
        ></a-entity>
        

      </a-marker> 
      <a-entity light="type: ambient; color: #BBB"; intensity: 1.5></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 1.5" position="-0.5 1 1"></a-entity>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
